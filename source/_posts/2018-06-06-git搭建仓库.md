---
layout: post
title: Git搭建仓库
tags:  [Git]
categories: [Git]
author: wonghy
---


## Git介绍
**Git** 是一个开源的分布式版本控制软件,用以有效、高速的处理从很小到非常大的项目版本管理。 Git 最初是由Linus Torvalds设计开发的，用于管理Linux内核开发。Git 是根据GNU通用公共许可证版本2的条款分发的自由/免费软件，安装参见：http://git-scm.com/

**参考：**
[深入浅出Git教程](https://www.cnblogs.com/syp172654682/p/7689328.html)<br/>
[Git命令教程](https://www.yiibai.com/git/git_reset.html)<br/>
[高质量的 Git 中文教程，来自国外社区的优秀文章和个人实践](https://github.com/geeeeeeeeek/git-recipes/wiki)<br/>
[Git参考手册](http://gitref.justjavac.com/)


## windows系统配置git
前面安装过程不在阐述，直说下面如何配置git

因为Git是分布式版本控制系统，所以需要填写用户名和邮箱作为一个标识。

```
$ git config --global user.name "xxx"
$ git config --global user.email "xxx@xxx"
```

```
$ ssh-keygen  #按几次enter回车键，出现目录链接，然后找到xx.pub文件，打开文件，复制里面的内容到github中
```


## 操作git

> **获得git仓库**

1. 通过命令 git init 把这个目录变成git可以管理的仓库
```
# 在当前目录新建一个Git代码库
$ git init

# 新建一个目录，将其初始化为Git代码库
$ git init [project-name]
```
这时候你当前目录下会多了一个.git的目录，这个目录是Git来跟踪管理版本的，没事千万不要手动乱改这个目录里面的文件，否则，会把git仓库给破坏了。

2. 克隆远程目录，由于是将远程服务器上的仓库完全镜像一份至本地，而不是取某一个特定版本，所以用clone而不是checkout
```
# 克隆一个项目和它的整个代码历史(版本信息)
$ git clone [url]
```


> **把文件添加到版本库中**

git版本控制系统可以告诉你每次的改动，只能跟踪文本文件的改动，比如txt文件，网页，所有程序的代码等，只能把二进制文件每次改动串起来，也就是知道图片从1kb变成2kb，但是到底改了啥，版本控制也不知道。


我在版本库目录中新建文本文件，如readme.txt
```
第一步:使用命令 git add添加到暂存区里面去
$ git add readme.txt

第二步：用命令 git commit告诉Git，把文件提交到仓库。
$ git commit -m "readme.txt提交"
```

> **查看文件的状态**

实际使用中你不止只有一个文件，或新增或修改多个文件，可能时间一久就忘了有多少文件需要提交，可以使用 git status 命令来查看当前状态,是否有未提交的文件

```
$ git status

```

> **比较当前文件跟版本文件内容**

git diff用于显示WorkSpace中的文件和暂存区文件的差异


```
$ git diff readme.txt

# 查看已缓存的改动
$ git diff --cached

# 查看已缓存的与未缓存的所有改动
$ git diff HEAD

#显示摘要而非整个 diff
$ git diff --stat 

```

> **查看历史提交记录**

```
# 历史纪录是根据时间倒叙排列的
$ git log

# 一个压缩后的每一条提交记录只占一行的输出
$ git log --pretty=oneline

# 只看某一个人的提交记录   
$ git log --author=bob

# ASCII 艺术的树形结构来展示所有的分支, 每个分支都标示了他的名字和标签
$ git log --graph --oneline --decorate --all

```








## 文件4种状态

- Untracked: 未跟踪, 此文件在文件夹中, 但并没有加入到git库, 不参与版本控制. 通过git add 状态变为Staged.

- Unmodify: 文件已经入库, 未修改, 即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处, 如果它被修改, 而变为Modified. 如果使用git rm移出版本库, 则成为Untracked文件

- Modified: 文件已修改, 仅仅是修改, 并没有进行其他的操作. 这个文件也有两个去处, 通过git add可进入暂存staged状态, 使用git checkout 则丢弃修改过, 返回到unmodify状态, 这个git checkout即从库中取出文件, 覆盖当前修改

- Staged: 暂存状态. 执行git commit则将修改同步到库中, 这时库中的文件和本地文件又变为一致, 文件为Unmodify状态. 执行git reset HEAD filename取消暂存, 文件状态为Modified
![文件4种状态](https://images2017.cnblogs.com/blog/63651/201709/63651-20170909091456335-1787774607.jpg)



## **理解工作区、暂存区和版本库的区别**

**工作区域**：
Git本地有三个工作区域：工作目录（Working Directory）、暂存区(Stage/Index)、资源库(Repository或Git Directory)。如果在加上远程的git仓库(Remote Directory)就可以分为四个工作区域。文件在这四个区域之间的转换关系如下：

![image](https://note.youdao.com/yws/api/personal/file/BEEA0855273E4CD6AEEBB58822EAF24A?method=download&shareKey=453a30b0974277aea875341bc6cc1b35)
- Workspace：工作区，就是你平时存放项目代码的地方
- Index / Stage：暂存区，用于临时存放你的改动，事实上它只是一个文件，保存即将提交到文件列表信息
- Repository：仓库区（或本地仓库），就是安全存放数据的位置，这里面有你提交到所有版本的数据。其中HEAD指向最新放入仓库的版本
- Remote：远程仓库，托管代码的服务器，可以简单的认为是你项目组中的一台电脑用于远程数据交换
- 
- 工作区：就是你在电脑里能看到的目录。
暂存区：英文叫stage, 或index。一般存放在 ".git目录下" 下的index文件（.git/index）中，所以我们把暂存区有时也叫作索引（index）。
版本库：工作区有一个隐藏目录.git，这个不算工作区，而是Git的版本库。
![image](https://note.youdao.com/yws/api/personal/file/389823FEA5614CB8B6EE9CC40A01FEF9?method=download&shareKey=b10514b7f23959b90d539b59435f06de)
![image](https://note.youdao.com/yws/api/personal/file/BBAAA9B4225E479BA04C89C1E6083C79?method=download&shareKey=46ab5f4eb7cdb8f44199246b3180295b)






